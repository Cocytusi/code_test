const hre = require("hardhat");
const { ethers, upgrades } = require("hardhat")
const {BigNumber} = require('ethers');
require("dotenv").config()

const allData = {
  '0x5D6Cb8E6a6a2E04123cf8357A76389F349015d8d': { nfts: [ '3203' ], rewards: '13562175925925839128' },
  '0x1345d5207ad8A892e763280adb20028c31822aE2': { nfts: [ '7265' ], rewards: '34429004629629409284' },
  '0xBeECfA5e02EBd2E6B5Ec97fb0616Bcd9A4a822A9': {
    nfts: [ '8116', '8446', '3029' ],
    rewards: '1809206874999995183217'
  },
  '0x1C515165FA78Ca1E196073669528171375f69AaF': { nfts: [ '3211', '7105' ], rewards: '70770358796295843366' },
  '0x665D047FA597b4f447A4Fb9887eAEbA4189dEde1': {
    nfts: [
      '1103', '278',  '1105',
      '2006', '2440', '2932',
      '4417', '5083', '5516',
      '5571', '6317', '6364',
      '6562', '6587', '7264',
      '7682', '8373', '8581',
      '9203', '9473'
    ],
    rewards: '1707773437499989070250'
  },
  '0xE7187B303A8B15968FBC3054A7A66CDB3f057Ff2': {
    nfts: [
      '650',  '2424', '5021',
      '5209', '6754', '6755',
      '6767', '6768', '7680',
      '7806', '7807', '7905',
      '7805', '8396', '9602'
    ],
    rewards: '0'
  },
  '0x10948D4709c0ACfc350502F6640E25D13fC88703': { nfts: [ '8575' ], rewards: '95621053240740128766' },
  '0xF7cb62bf544513BE4D013F742f70d842c48633cF': {
    nfts: [ '5741', '6105', '8274' ],
    rewards: '146770868055554616222'
  },
  '0xE7C6Af388445266ADEab62b25460CF3c0383f2CE': { nfts: [ '4190', '4191' ], rewards: '98409328703703073884' },
  '0xf93FAbf50598D5BA8c6cBF5AA27F7A4E143C7a58': { nfts: [ '4551' ], rewards: '147717083333332387944' },
  '0x6C321A0ea5E7C8B25e41d2e47A556706649A6961': { nfts: [ '8735' ], rewards: '55870983796295938722' },
  '0xd3A10634598eCaD9Dec0b9f89b9f2d5a4704D26A': { nfts: [], rewards: '254629629629628' },
  '0xc88d0C63aA5B000bF45391BdE53eeaDe1661D64C': { nfts: [ '6403' ], rewards: '0' },
  '0xD578C97b62BdbF544bC507AFb9946ff5e2794d09': {
    nfts: [ '1244', '1245', '1246' ],
    rewards: '143181944444443528080'
  },
  '0x987E9ab25F5d16C69Db27D77Fd58BB5e6b26be86': {
    nfts: [ '8375', '9219', '9220', '5505', '9356', '2438' ],
    rewards: '744919097222217454740'
  },
  '0xEf103307BA56e3F079631Dc5DCeB31F4E4EabdB5': { nfts: [], rewards: '32523148148147940' },
  '0x1e341EC9Ab87305D1168f73A1052d2dBa83fD4bC': { nfts: [ '4096' ], rewards: '42274791666666396108' },
  '0xd2De5684C9Dc619C92764A5F344b3F5796558874': {
    nfts: [ '1554', '1555', '1556', '2745' ],
    rewards: '418209074074071397536'
  },
  '0x8678465Cb5b915b3ff9ef9f45CE01c91d2F8F2Ec': { nfts: [ '8768', '4946' ], rewards: '293549305555553676840' },
  '0xc8371ba60B5Ae604f42f22Fd9EBe236fd3cF06AA': { nfts: [ '3059', '3060' ], rewards: '30424490740740546024' },
  '0xDFc6100cB9d59a69107413066396197E352d8a4d': { nfts: [ '2521' ], rewards: '49556828703703386540' },
  '0x76Ca474c90c1fd42F55E69a6088e1965C226ebaa': {
    nfts: [ '5153', '5154', '6982', '4609' ],
    rewards: '197744664351850586286'
  },
  '0xb13B9E1C8C15F789795b4a3cdfbb172e37673208': { nfts: [], rewards: '43005459143518402666690' },
  '0x72a773aaDc0e928c9248ae71260120e6e73Bd447': {
    nfts: [
      '1194', '1195',
      '1196', '1197',
      '1198', '1780',
      '1781', '1782',
      '1783', '1784'
    ],
    rewards: '475840578703700658324'
  },
  '0x505FEe6f49A803c234FFE6DCf0812D9E1c5356F7': { nfts: [], rewards: '3576388888888866' },
  '0x8e90681c55B503dE6a64b202Cf1454cbb1B1d8Bc': {
    nfts: [ '9853', '6579', '9054' ],
    rewards: '252672152777776160676'
  },
  '0x5cF832C1B8B514578f0a40352413Aa2DA81E2fE6': { nfts: [ '8205' ], rewards: '49237430555555240436' },
  '0x901e6C99f7138dc876D3F22B32BedEe52Ab595b3': { nfts: [ '9546' ], rewards: '49593055555555238160' },
  '0x53D7b4dC5d15e57B7260D847bFA7a85cd39238ac': {
    nfts: [ '5168', '1539', '2580', '2578' ],
    rewards: '193845844907406166794'
  },
  '0x38e2Ab11179a60e65de3f3F2A210A7BE69F6D23B': { nfts: [], rewards: '522291666666663324' },
  '0x4b21683E7764770cc8abE35D9E95F86187f4227A': { nfts: [], rewards: '2141203703703690' },
  '0x2F298e77bA4Fd4c0B6878938F6b4071927954086': { nfts: [ '6366' ], rewards: '29935231481481289896' },
  '0x46a247479ed4c34A8DD2dcC2553531876dEdEEC8': { nfts: [ '7288', '7346', '9518' ], rewards: '0' },
  '0x4046F608353E9Fe62D06073d25B1e21dD4780e43': { nfts: [ '6869' ], rewards: '49173865740740426028' },
  '0x1C1C0393f0Cab71917bcA699462FBCeD5Be4654C': { nfts: [ '4485', '4484' ], rewards: '23262152777777628900' },
  '0xE0419278cC077283cbfCa46c2a737B1cDC2ea5c0': {
    nfts: [
      '4374', '5298',
      '8752', '7329',
      '9424', '9363',
      '9361'
    ],
    rewards: '106560127314814132830'
  },
  '0x2951e0578b242152AED339c22A61Ef2c516B3bDa': { nfts: [ '5753', '5752', '5742' ], rewards: '49016597222221908516' },
  '0x611DD52C2244E675b80fCFA0845f12D72845ee11': { nfts: [ '2761', '4527' ], rewards: '58212615740740368180' },
  '0xe4C2b577d0d30a7795B608751dc41Fe8CA32eE53': { nfts: [], rewards: '2827858796296278198' },
  '0xFb0E1c0A2285D29B25f8a4aF171d28b659Cc5857': { nfts: [], rewards: '138888888888888' },
  '0xC9Ff79C8a017Dcd426E8fAe7B4879fbF6086b476': { nfts: [ '8058' ], rewards: '37837928240740498578' },
  '0xb3A672Ebc3898F8F6b1772385932F51f2cA58BA7': {
    nfts: [
      '5850', '5852', '2212', '8866', '2174',
      '9495', '6537', '9528', '5760', '7801',
      '7297', '9566', '9565', '2775', '3777',
      '3742', '6823', '7578', '7076', '5266',
      '3355', '5271', '3089', '3151', '2116',
      '6701', '2931', '7021', '8216', '5450',
      '6444', '7404', '4546', '5213', '9119',
      '2869', '5407', '9151', '9152', '9120',
      '9277', '8680', '9146', '9117', '8723',
      '5406', '9519', '7989', '1143', '3083'
    ],
    rewards: '0'
  },
  '0x95D79D6199c852019af057774e99412c0c37B2A8': { nfts: [ '7996' ], rewards: '37861805555555313240' },
  '0x488FBe629DAD546715e1cE2461C7C3feecCf599d': { nfts: [ '6495', '6874' ], rewards: '358907164351849554846' },
  '0x7eA6F7b33EB393b4B40a15F79Ba54f2C521a8B77': { nfts: [], rewards: '179965277777776626' },
  '0x94EFcFb68b79499A3D6AE56050bDB759d53f414f': { nfts: [ '92' ], rewards: '98534629629628999008' },
  '0x93e9b4130f7d30427D25c274ea3F147e10c4E6D4': { nfts: [], rewards: '9236111111111052' },
  '0xE890427Fe7b508c5305C06Bd328ca1B292FC5668': { nfts: [ '9964' ], rewards: '73990104166666193130' },
  '0x399DdAc99CfA7Bf7014ebf088673947dDea39069': { nfts: [ '95', '1865' ], rewards: '145695150462962030514' },
  '0xEA7b634B09c4Bf35EB5f12EDe6e32d1e249aadEb': { nfts: [], rewards: '475486111111108068' },
  '0x20cC6Eb320774cE35071acf97BaDE63FFfE1373E': {
    nfts: [ '5579', '5582', '5578', '5134' ],
    rewards: '1544985787037027149128'
  },
  '0x5a05b1e796a33b546aD5b2e61B350749dc23DE45': { nfts: [], rewards: '1478680555555546092' },
  '0x0CE146864caB48E27D38d624e07c725CCcf4E6Fc': {
    nfts: [
      '1107', '1106', '1108',
      '1109', '1110', '1112',
      '1117', '1118', '1119',
      '1120', '1121', '2151',
      '2595', '5888', '5889',
      '5890', '5891', '5892',
      '5954', '5975', '6319'
    ],
    rewards: '0'
  },
  '0x17fb666BAAd5E260B02A0C6eCad2A1F781FB056c': {
    nfts: [ '2103', '2073', '2094', '3991' ],
    rewards: '33213796296296083728'
  },
  '0xf8FaB446e40CA05E87d9C32B089B093616dbA71D': {
    nfts: [
      '451', '416', '434',
      '449', '450', '470',
      '471', '472', '487',
      '488'
    ],
    rewards: '445750127314811962014'
  },
  '0xB15Eb0848A2f2B1dAac0186f30F9f74f76c422fC': {
    nfts: [ '5569', '5345', '5357' ],
    rewards: '1357777962962954273184'
  },
  '0xE0e19ed24592Ab64ad9Fe0D85b82470F0fbefb4B': {
    nfts: [
      '6141', '6142',
      '6143', '6144',
      '6145', '9423',
      '9425', '9426',
      '9427', '9428',
      '9444'
    ],
    rewards: '444240983796293453154'
  },
  '0x1A2b734125d61AcB6d29c44574b2f43076FC99a5': { nfts: [ '5323' ], rewards: '64741678240740326394' },
  '0x8bBEf539C1eD386BAc9dbD50b53aDC4C58a028FC': {
    nfts: [
      '7773', '1092', '1091', '910',
      '899',  '908',  '911',  '1078',
      '7526', '1077', '1076', '1096',
      '51',   '7559', '7776', '8059',
      '2727', '7683', '7558', '7774',
      '7778', '7777', '9196', '7557',
      '7772', '7775', '8052', '8636',
      '8487', '7065', '8486'
    ],
    rewards: '6086293333333299896927'
  },
  '0x7276F8b3a8EB15679F572973F5296b8cC4c08Fc5': {
    nfts: [
      '1549', '8963',
      '1659', '1649',
      '1668', '1771',
      '2214', '2286',
      '8877', '8878',
      '9963', '9989'
    ],
    rewards: '1036501249999993366392'
  },
  '0x4E96754DA125F39AC7d43D9373235Ca87Cd549d2': { nfts: [ '4671', '8595' ], rewards: '865140370370364833472' },
  '0xE83FE939057047a3E439F26a64225d74C36C787D': { nfts: [ '4278' ], rewards: '624730497685183070194' },
  '0xf0eB9e094667668B077f7A439094F19E1540355D': {
    nfts: [ '2407', '5812', '7164' ],
    rewards: '272642650462961218050'
  },
  '0x4d463Cc06afAb96168a5ee76C48a220241DDB090': {
    nfts: [ '7771', '6985', '6310' ],
    rewards: '133300381944443591322'
  },
  '0x6D45852321339514A30442767c1Eb70A9CEb7507': { nfts: [ '3352' ], rewards: '39983564814814558920' },
  '0xa533953FFef98176F3e9bb090BbAe44473608203': { nfts: [ '7351', '9286', '2104', '5350' ], rewards: '0' },
  '0x570e0a5134b7c52Ad0b8C42C6aE9C8D4F2b1291d': {
    nfts: [ '2902', '9879', '9881', '9880', '9882', '9883' ],
    rewards: '916032835648142285538'
  },
  '0x2fE6017B7e50E8FD3a9E29E46EB6E3ED2f32cC9D': { nfts: [ '6917' ], rewards: '383054363425923474378' },
  '0x2eBfA81830D4E95Cfc12d924B0D24D690f558f88': { nfts: [ '6332', '1139' ], rewards: '0' },
  '0x74445a2A7F4A45bdad2D3b95262354f6De8148EA': {
    nfts: [ '6275', '6964', '2858' ],
    rewards: '155163541666665673620'
  },
  '0x257D1f543D2C934b85e864403a04A088F43F05e2': {
    nfts: [ '7117', '7118', '7119', '7120', '7116' ],
    rewards: '1641390358796285791398'
  },
  '0xb562Ba2A39d7848Fd9F070cDdcade6781f6e6A92': { nfts: [ '6412', '9905' ], rewards: '0' },
  '0x4c8486315366C32b2Df18262B53E97AfdC479076': { nfts: [ '9974' ], rewards: '211129722222220870992' },
  '0x1495435E4185a6B7A447c4F45Ff729e69bf62765': { nfts: [ '408' ], rewards: '48487881944444134122' },
  '0x7e15893ed2ccFcB8a34C0b6557e7107322C32e59': {
    nfts: [ '1162', '4434', '7279' ],
    rewards: '260601701388887221038'
  },
  '0x810EF00caE4f1A132a36921C7363b1A6251C1894': { nfts: [ '2177', '4111', '2722' ], rewards: '0' },
  '0xfbd00c89FE758EF364E62bDD42f058671F6Fd27D': { nfts: [ '7070' ], rewards: '141709270833332426394' },
  '0xa29F7e6D85F70450ECe25654b11fB8415e8264F8': { nfts: [ '7913' ], rewards: '39908425925925670512' },
  '0x6Ab3b8928bAf0f09CAE85b178e60CB6abdF5cFD9': { nfts: [ '7512', '5990', '5128' ], rewards: '56796840277777414278' },
  '0xF8ec0cD084D084632efbE018a463a5e590F6d810': {
    nfts: [ '1414', '1413', '1412' ],
    rewards: '163243298611110066354'
  },
  '0xa686385A51ad18bfea15E2C828088f1C0c399526': { nfts: [ '7741' ], rewards: '179955763888887737172' },
  '0x78a87E5eD71372bC5F0bcbe5C4B55Ed03c28b779': { nfts: [], rewards: '196759259259258' },
  '0x1b66dFC1dF7f5b3147cBba7a74A043ed4b8E67E7': { nfts: [ '1527' ], rewards: '47847094907407101186' },
  '0xb5621c2772c3278cdd18DaA702670051A62D93A2': {
    nfts: [
      '9624', '930',  '931',  '932',  '933',
      '934',  '935',  '936',  '937',  '938',
      '946',  '947',  '948',  '950',  '951',
      '949',  '952',  '953',  '9347', '9346',
      '7359', '9514', '9513', '9512', '7358',
      '7357', '5242', '5241', '5240', '960',
      '959',  '955',  '956',  '957',  '954',
      '958',  '9623'
    ],
    rewards: '1050922245370363644468'
  },
  '0x654A49DB078FFD34221f2C1E3812A4201cD11378': { nfts: [ '4567', '4645', '3743' ], rewards: '32347129629629422608' },
  '0xc927753Ac7251Aa6e8Ae32c69D22648946dBfbb9': {
    nfts: [ '4851', '4850', '4849', '4848', '6772', '4852' ],
    rewards: '631880555555555365248'
  },
  '0x6B66F2389799CF2924E8886F50C2C37dc3C773A0': { nfts: [], rewards: '300925925925924' }
}

async function run() {
  // const data = {}
  // returns(address[] memory addresses, NFT[][] memory nfts, uint256[] memory rewards)
  // for (let i = 0; i < allData[0].length; i++) {
  //   data[allData[0][i]] = {
  //     nfts: allData[1][i].map(d => d[1]),
  //     rewards: allData[2][i],
  //   }
  // }
  const wallets = Object.keys(allData);
  let totalRewardsLeft = BigNumber.from(0);
  let totalNfts = 0;
  for (let i = 0; i < wallets.length; i++) {
    const wallet = wallets[i];
    const data = allData[wallet];
    const bnBal = ethers.utils.parseUnits(data.rewards, 'wei');
    totalRewardsLeft = totalRewardsLeft.add(bnBal);
    const bal = ethers.utils.formatEther(bnBal);
    totalNfts += data.nfts.length;
    console.log("Wallet:", wallet, "| Remaining rewards:", bal, "| NFTs:", data.nfts.length, data.nfts.length > 0 ? `| NFT IDs: ${data.nfts.join(',')}` : '')
  }
  console.log("Total Pending Rewards:", ethers.utils.formatEther(totalRewardsLeft));
  console.log("Total NFTs:", totalNfts);
}

const tokenIds = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,73,74,75,76,78,79, 82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101,102,103,104,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,144,145,146,148,149,155,156,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230, 231,232,233,234,235,236,237,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464, 465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,605,606,607,608,609,611,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,702,703,704,705,706,707,708,709,710,711,712, 713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,748,749,750,751,752,753,754,755,756,757,758,759,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,831,832,833,834,835,836,837,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,856,858,859,860,861,862,863,864,865,866,867,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955, 956,957,958,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083]

const run2 = async () => {
  const accounts = await ethers.getSigners()
  const c = await ethers.getContractAt('CosmicElvesTicketUpgradeable', '0x87D0F9ff4B51EEfe9f5f1578bc35e4ddA28bBd1e', accounts[0])
  const provider = new ethers.providers.StaticJsonRpcProvider('https://api.avax.network/ext/bc/C/rpc', 43114);
  const contract = new ethers.Contract(c.address, [{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}], provider);
  for (let i = 0; i < tokenIds.length; i++) {
    try {
      const uri = await contract.tokenURI(tokenIds[i]);
      console.log("TokenId", tokenIds[i], "is fine")
    } catch (e) {
      console.log("Error getting tokenId", tokenIds[i], e)
    }
  }
}
run2()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error)
    process.exit(1)
  })